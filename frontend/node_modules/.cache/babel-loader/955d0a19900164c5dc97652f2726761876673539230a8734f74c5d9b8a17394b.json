{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{useNavigate}from'react-router-dom';import{Typography,Box,Button,TextField,Grid,Card,CardContent,CardActions,CardMedia,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,CircularProgress,Alert,Snackbar,InputAdornment,Container}from'@mui/material';import{Add as AddIcon,Edit as EditIcon,Delete as DeleteIcon,Search as SearchIcon,Clear as ClearIcon,Refresh as RefreshIcon}from'@mui/icons-material';import{booksAPI}from'../services/api';import{AuthContext}from'../context/AuthContext';// Book form component for add/edit\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BookForm=_ref=>{let{book,onSubmit,onCancel}=_ref;const[formData,setFormData]=useState({title:'',author:'',isbn:'',publisher:'',publicationYear:'',quantity:1,...book});const[formErrors,setFormErrors]=useState({});const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:name==='publicationYear'||name==='quantity'?value===''?'':parseInt(value,10):value});// Clear error when user types\nif(formErrors[name]){setFormErrors({...formErrors,[name]:''});}};const validateForm=()=>{const errors={};if(!formData.title){errors.title='Title is required';}if(!formData.author){errors.author='Author is required';}if(!formData.isbn){errors.isbn='ISBN is required';}if(!formData.publisher){errors.publisher='Publisher is required';}if(!formData.publicationYear){errors.publicationYear='Publication year is required';}else if(formData.publicationYear<1000||formData.publicationYear>new Date().getFullYear()){errors.publicationYear='Invalid publication year';}if(!formData.quantity){errors.quantity='Quantity is required';}else if(formData.quantity<1){errors.quantity='Quantity must be at least 1';}setFormErrors(errors);return Object.keys(errors).length===0;};const handleSubmit=e=>{e.preventDefault();if(validateForm()){onSubmit(formData);}};return/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"title\",label:\"Title\",name:\"title\",value:formData.title,onChange:handleChange,error:!!formErrors.title,helperText:formErrors.title})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"author\",label:\"Author\",name:\"author\",value:formData.author,onChange:handleChange,error:!!formErrors.author,helperText:formErrors.author})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"isbn\",label:\"ISBN\",name:\"isbn\",value:formData.isbn,onChange:handleChange,error:!!formErrors.isbn,helperText:formErrors.isbn})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"publisher\",label:\"Publisher\",name:\"publisher\",value:formData.publisher,onChange:handleChange,error:!!formErrors.publisher,helperText:formErrors.publisher})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"publicationYear\",label:\"Publication Year\",name:\"publicationYear\",type:\"number\",value:formData.publicationYear,onChange:handleChange,error:!!formErrors.publicationYear,helperText:formErrors.publicationYear,inputProps:{min:1000,max:new Date().getFullYear()}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"quantity\",label:\"Quantity\",name:\"quantity\",type:\"number\",value:formData.quantity,onChange:handleChange,error:!!formErrors.quantity,helperText:formErrors.quantity,inputProps:{min:1}})})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:3,display:'flex',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(Button,{onClick:onCancel,sx:{mr:1},children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",children:[book?'Update':'Add',\" Book\"]})]})]});};// Book card component\nconst BookCard=_ref2=>{let{book,onEdit,onDelete}=_ref2;const navigate=useNavigate();const{currentUser}=useContext(AuthContext);// Direct role check\nconst hasAdminRole=currentUser&&currentUser.role==='ADMIN';console.log('BookCard component - direct role check:',hasAdminRole);const handleClick=()=>{navigate(`/books/${book.id}`);};return/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(CardMedia,{component:\"div\",sx:{height:140,bgcolor:'primary.light',display:'flex',alignItems:'center',justifyContent:'center',color:'white'},children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:book.title.substring(0,1)})}),/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",component:\"div\",noWrap:true,children:book.title}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",gutterBottom:true,children:[\"by \",book.author]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"ISBN: \",book.isbn]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Published: \",book.publicationYear]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Available: \",book.availableQuantity,\" / \",book.quantity]})]}),/*#__PURE__*/_jsxs(CardActions,{sx:{justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:handleClick,children:\"View Details\"}),/*#__PURE__*/_jsx(Box,{children:hasAdminRole&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"primary\",onClick:()=>onEdit(book),children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>onDelete(book),children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})})]})]});};const Books=()=>{const{currentUser,isAdmin}=useContext(AuthContext);const navigate=useNavigate();console.log('Books component - currentUser:',currentUser);console.log('Books component - isAdmin check:',isAdmin());// Direct role check\nconst hasAdminRole=currentUser&&currentUser.role==='ADMIN';console.log('Books component - direct role check:',hasAdminRole);const[books,setBooks]=useState([]);const[filteredBooks,setFilteredBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');// Dialog states\nconst[openAddDialog,setOpenAddDialog]=useState(false);const[openEditDialog,setOpenEditDialog]=useState(false);const[openDeleteDialog,setOpenDeleteDialog]=useState(false);const[currentBook,setCurrentBook]=useState(null);// Snackbar state\nconst[snackbar,setSnackbar]=useState({open:false,message:'',severity:'info'});const fetchBooks=async()=>{try{setLoading(true);setError(null);console.log('Fetching books...');const response=await booksAPI.getAll();console.log('Books fetched:',response.data);if(Array.isArray(response.data)){console.log('Setting books state with:',response.data);setBooks(response.data);setFilteredBooks(response.data);}else{console.warn('Unexpected response format:',response.data);setBooks([]);setFilteredBooks([]);setError('Received invalid data format from server');}}catch(err){console.error('Error fetching books:',err);let errorMessage='Failed to load books. Please try again later.';if(err.response){var _err$response$data,_err$response$data2;errorMessage=`Server error (${err.response.status}): ${((_err$response$data=err.response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||((_err$response$data2=err.response.data)===null||_err$response$data2===void 0?void 0:_err$response$data2.error)||'Unknown error'}`;}else if(err.request){errorMessage='No response from server. Please check your connection.';}else{errorMessage=err.message||errorMessage;}setError(errorMessage);// If we have no books yet, set empty arrays to avoid undefined errors\nif(!books.length){setBooks([]);setFilteredBooks([]);}}finally{setLoading(false);}};useEffect(()=>{fetchBooks();},[]);useEffect(()=>{if(searchTerm){const filtered=books.filter(book=>book.title.toLowerCase().includes(searchTerm.toLowerCase())||book.author.toLowerCase().includes(searchTerm.toLowerCase())||book.isbn.toLowerCase().includes(searchTerm.toLowerCase()));setFilteredBooks(filtered);}else{setFilteredBooks(books);}},[searchTerm,books]);const handleSearchChange=e=>{setSearchTerm(e.target.value);};const clearSearch=()=>{setSearchTerm('');};// Add book\nconst handleAddBook=async bookData=>{try{setLoading(true);console.log('Adding book:',bookData);const response=await booksAPI.create(bookData);console.log('Book added response:',response);// Update the books state directly with the new book\nif(response.data){setBooks(prevBooks=>{const updatedBooks=[...prevBooks,response.data];console.log('Updated books state:',updatedBooks);return updatedBooks;});// Also update filtered books to show the new book immediately\nsetFilteredBooks(prevFilteredBooks=>{const updatedFilteredBooks=[...prevFilteredBooks,response.data];console.log('Updated filtered books state:',updatedFilteredBooks);return updatedFilteredBooks;});}setSnackbar({open:true,message:'Book added successfully. Redirecting to dashboard...',severity:'success'});setOpenAddDialog(false);// Navigate to dashboard after a short delay to show the success message\nsetTimeout(()=>{navigate('/');},1500);}catch(err){console.error('Error adding book:',err);let errorMessage='Failed to add book';if(err.response){var _err$response$data3,_err$response$data4;errorMessage=((_err$response$data3=err.response.data)===null||_err$response$data3===void 0?void 0:_err$response$data3.message)||((_err$response$data4=err.response.data)===null||_err$response$data4===void 0?void 0:_err$response$data4.error)||`Server error: ${err.response.status}`;}else if(err.request){errorMessage='No response from server. Please check your connection.';}else{errorMessage=err.message||errorMessage;}setSnackbar({open:true,message:errorMessage,severity:'error'});}finally{setLoading(false);}};// Edit book\nconst handleEditBook=async bookData=>{try{setLoading(true);console.log('Updating book:',bookData);const response=await booksAPI.update(currentBook.id,bookData);console.log('Book updated response:',response);setSnackbar({open:true,message:'Book updated successfully',severity:'success'});setOpenEditDialog(false);fetchBooks();}catch(err){console.error('Error updating book:',err);let errorMessage='Failed to update book';if(err.response){var _err$response$data5,_err$response$data6;errorMessage=((_err$response$data5=err.response.data)===null||_err$response$data5===void 0?void 0:_err$response$data5.message)||((_err$response$data6=err.response.data)===null||_err$response$data6===void 0?void 0:_err$response$data6.error)||`Server error: ${err.response.status}`;}else if(err.request){errorMessage='No response from server. Please check your connection.';}else{errorMessage=err.message||errorMessage;}setSnackbar({open:true,message:errorMessage,severity:'error'});}finally{setLoading(false);}};// Delete book\nconst handleDeleteBook=async()=>{try{setLoading(true);console.log('Deleting book:',currentBook.id);const response=await booksAPI.delete(currentBook.id);console.log('Book deleted response:',response);setSnackbar({open:true,message:'Book deleted successfully',severity:'success'});setOpenDeleteDialog(false);fetchBooks();}catch(err){console.error('Error deleting book:',err);let errorMessage='Failed to delete book';if(err.response){var _err$response$data7,_err$response$data8;errorMessage=((_err$response$data7=err.response.data)===null||_err$response$data7===void 0?void 0:_err$response$data7.message)||((_err$response$data8=err.response.data)===null||_err$response$data8===void 0?void 0:_err$response$data8.error)||`Server error: ${err.response.status}`;}else if(err.request){errorMessage='No response from server. Please check your connection.';}else{errorMessage=err.message||errorMessage;}setSnackbar({open:true,message:errorMessage,severity:'error'});}finally{setLoading(false);}};const handleCloseSnackbar=()=>{setSnackbar({...snackbar,open:false});};if(loading&&books.length===0){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'50vh'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",children:[/*#__PURE__*/_jsxs(Box,{sx:{my:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Books\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2,mb:3},children:[hasAdminRole?/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>setOpenAddDialog(true),children:\"Add Book\"}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>{console.log('Non-admin tried to add book - currentUser:',currentUser);setSnackbar({open:true,message:'Admin privileges required to add books. Use the \"Login as Admin\" option on the login page.',severity:'warning'});},children:\"Add Book\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:()=>{console.log('Manually refreshing book list...');fetchBooks();},children:\"Refresh\"})]}),!currentUser&&/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:3},children:\"Please log in to access all features. Use the \\\"Login as Admin\\\" option on the login page for full access.\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),/*#__PURE__*/_jsx(Box,{sx:{mb:3},children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Search by title, author, or ISBN\",value:searchTerm,onChange:handleSearchChange,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{})}),endAdornment:searchTerm&&/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:clearSearch,children:/*#__PURE__*/_jsx(ClearIcon,{})})})}})}),filteredBooks.length===0?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'200px'},children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:searchTerm?'No books match your search':'No books available'})}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:filteredBooks.map(book=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,lg:3,children:/*#__PURE__*/_jsx(BookCard,{book:book,onEdit:book=>{setCurrentBook(book);setOpenEditDialog(true);},onDelete:book=>{setCurrentBook(book);setOpenDeleteDialog(true);}})},book.id))}),/*#__PURE__*/_jsxs(Dialog,{open:openAddDialog,onClose:()=>setOpenAddDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Add New Book\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(BookForm,{onSubmit:handleAddBook,onCancel:()=>setOpenAddDialog(false)})})]}),/*#__PURE__*/_jsxs(Dialog,{open:openEditDialog,onClose:()=>setOpenEditDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Edit Book\"}),/*#__PURE__*/_jsx(DialogContent,{children:currentBook&&/*#__PURE__*/_jsx(BookForm,{book:currentBook,onSubmit:handleEditBook,onCancel:()=>setOpenEditDialog(false)})})]}),/*#__PURE__*/_jsxs(Dialog,{open:openDeleteDialog,onClose:()=>setOpenDeleteDialog(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Delete Book\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Typography,{children:[\"Are you sure you want to delete \\\"\",currentBook===null||currentBook===void 0?void 0:currentBook.title,\"\\\"?\"]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenDeleteDialog(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleDeleteBook,color:\"error\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:6000,onClose:handleCloseSnackbar,children:/*#__PURE__*/_jsx(Alert,{onClose:handleCloseSnackbar,severity:snackbar.severity,sx:{width:'100%'},children:snackbar.message})})]});};export default Books;","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","Typography","Box","Button","TextField","Grid","Card","CardContent","CardActions","CardMedia","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","CircularProgress","Alert","Snackbar","InputAdornment","Container","Add","AddIcon","Edit","EditIcon","Delete","DeleteIcon","Search","SearchIcon","Clear","ClearIcon","Refresh","RefreshIcon","booksAPI","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BookForm","_ref","book","onSubmit","onCancel","formData","setFormData","title","author","isbn","publisher","publicationYear","quantity","formErrors","setFormErrors","handleChange","e","name","value","target","parseInt","validateForm","errors","Date","getFullYear","Object","keys","length","handleSubmit","preventDefault","component","noValidate","children","container","spacing","item","xs","required","fullWidth","id","label","onChange","error","helperText","sm","type","inputProps","min","max","sx","mt","display","justifyContent","onClick","mr","variant","BookCard","_ref2","onEdit","onDelete","navigate","currentUser","hasAdminRole","role","console","log","handleClick","height","flexDirection","bgcolor","alignItems","color","substring","flexGrow","gutterBottom","noWrap","availableQuantity","size","Books","isAdmin","books","setBooks","filteredBooks","setFilteredBooks","loading","setLoading","setError","searchTerm","setSearchTerm","openAddDialog","setOpenAddDialog","openEditDialog","setOpenEditDialog","openDeleteDialog","setOpenDeleteDialog","currentBook","setCurrentBook","snackbar","setSnackbar","open","message","severity","fetchBooks","response","getAll","data","Array","isArray","warn","err","errorMessage","_err$response$data","_err$response$data2","status","request","filtered","filter","toLowerCase","includes","handleSearchChange","clearSearch","handleAddBook","bookData","create","prevBooks","updatedBooks","prevFilteredBooks","updatedFilteredBooks","setTimeout","_err$response$data3","_err$response$data4","handleEditBook","update","_err$response$data5","_err$response$data6","handleDeleteBook","delete","_err$response$data7","_err$response$data8","handleCloseSnackbar","maxWidth","my","gap","mb","startIcon","placeholder","InputProps","startAdornment","position","endAdornment","map","md","lg","onClose","autoHideDuration","width"],"sources":["/home/rohan-sinha/Documents/Library Managemet System /frontend/src/pages/Books.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Typography,\n  Box,\n  Button,\n  TextField,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  CardMedia,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  CircularProgress,\n  Alert,\n  Snackbar,\n  InputAdornment,\n  Container\n} from '@mui/material';\nimport {\n  Add as AddIcon,\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  Search as SearchIcon,\n  Clear as ClearIcon,\n  Refresh as RefreshIcon\n} from '@mui/icons-material';\nimport { booksAPI } from '../services/api';\nimport { AuthContext } from '../context/AuthContext';\n\n// Book form component for add/edit\nconst BookForm = ({ book, onSubmit, onCancel }) => {\n  const [formData, setFormData] = useState({\n    title: '',\n    author: '',\n    isbn: '',\n    publisher: '',\n    publicationYear: '',\n    quantity: 1,\n    ...book\n  });\n  const [formErrors, setFormErrors] = useState({});\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: name === 'publicationYear' || name === 'quantity' ? \n        (value === '' ? '' : parseInt(value, 10)) : value\n    });\n    \n    // Clear error when user types\n    if (formErrors[name]) {\n      setFormErrors({\n        ...formErrors,\n        [name]: ''\n      });\n    }\n  };\n\n  const validateForm = () => {\n    const errors = {};\n    \n    if (!formData.title) {\n      errors.title = 'Title is required';\n    }\n    \n    if (!formData.author) {\n      errors.author = 'Author is required';\n    }\n    \n    if (!formData.isbn) {\n      errors.isbn = 'ISBN is required';\n    }\n    \n    if (!formData.publisher) {\n      errors.publisher = 'Publisher is required';\n    }\n    \n    if (!formData.publicationYear) {\n      errors.publicationYear = 'Publication year is required';\n    } else if (formData.publicationYear < 1000 || formData.publicationYear > new Date().getFullYear()) {\n      errors.publicationYear = 'Invalid publication year';\n    }\n    \n    if (!formData.quantity) {\n      errors.quantity = 'Quantity is required';\n    } else if (formData.quantity < 1) {\n      errors.quantity = 'Quantity must be at least 1';\n    }\n    \n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    if (validateForm()) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <TextField\n            required\n            fullWidth\n            id=\"title\"\n            label=\"Title\"\n            name=\"title\"\n            value={formData.title}\n            onChange={handleChange}\n            error={!!formErrors.title}\n            helperText={formErrors.title}\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            required\n            fullWidth\n            id=\"author\"\n            label=\"Author\"\n            name=\"author\"\n            value={formData.author}\n            onChange={handleChange}\n            error={!!formErrors.author}\n            helperText={formErrors.author}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            fullWidth\n            id=\"isbn\"\n            label=\"ISBN\"\n            name=\"isbn\"\n            value={formData.isbn}\n            onChange={handleChange}\n            error={!!formErrors.isbn}\n            helperText={formErrors.isbn}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            fullWidth\n            id=\"publisher\"\n            label=\"Publisher\"\n            name=\"publisher\"\n            value={formData.publisher}\n            onChange={handleChange}\n            error={!!formErrors.publisher}\n            helperText={formErrors.publisher}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            fullWidth\n            id=\"publicationYear\"\n            label=\"Publication Year\"\n            name=\"publicationYear\"\n            type=\"number\"\n            value={formData.publicationYear}\n            onChange={handleChange}\n            error={!!formErrors.publicationYear}\n            helperText={formErrors.publicationYear}\n            inputProps={{ min: 1000, max: new Date().getFullYear() }}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            fullWidth\n            id=\"quantity\"\n            label=\"Quantity\"\n            name=\"quantity\"\n            type=\"number\"\n            value={formData.quantity}\n            onChange={handleChange}\n            error={!!formErrors.quantity}\n            helperText={formErrors.quantity}\n            inputProps={{ min: 1 }}\n          />\n        </Grid>\n      </Grid>\n      <Box sx={{ mt: 3, display: 'flex', justifyContent: 'flex-end' }}>\n        <Button onClick={onCancel} sx={{ mr: 1 }}>\n          Cancel\n        </Button>\n        <Button type=\"submit\" variant=\"contained\">\n          {book ? 'Update' : 'Add'} Book\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\n// Book card component\nconst BookCard = ({ book, onEdit, onDelete }) => {\n  const navigate = useNavigate();\n  const { currentUser } = useContext(AuthContext);\n  \n  // Direct role check\n  const hasAdminRole = currentUser && currentUser.role === 'ADMIN';\n  console.log('BookCard component - direct role check:', hasAdminRole);\n\n  const handleClick = () => {\n    navigate(`/books/${book.id}`);\n  };\n\n  return (\n    <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n      <CardMedia\n        component=\"div\"\n        sx={{\n          height: 140,\n          bgcolor: 'primary.light',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          color: 'white'\n        }}\n      >\n        <Typography variant=\"h5\">{book.title.substring(0, 1)}</Typography>\n      </CardMedia>\n      <CardContent sx={{ flexGrow: 1 }}>\n        <Typography gutterBottom variant=\"h6\" component=\"div\" noWrap>\n          {book.title}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n          by {book.author}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          ISBN: {book.isbn}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Published: {book.publicationYear}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Available: {book.availableQuantity} / {book.quantity}\n        </Typography>\n      </CardContent>\n      <CardActions sx={{ justifyContent: 'space-between' }}>\n        <Button size=\"small\" onClick={handleClick}>\n          View Details\n        </Button>\n        <Box>\n          {hasAdminRole && (\n            <>\n              <IconButton size=\"small\" color=\"primary\" onClick={() => onEdit(book)}>\n                <EditIcon />\n              </IconButton>\n              <IconButton size=\"small\" color=\"error\" onClick={() => onDelete(book)}>\n                <DeleteIcon />\n              </IconButton>\n            </>\n          )}\n        </Box>\n      </CardActions>\n    </Card>\n  );\n};\n\nconst Books = () => {\n  const { currentUser, isAdmin } = useContext(AuthContext);\n  const navigate = useNavigate();\n  \n  console.log('Books component - currentUser:', currentUser);\n  console.log('Books component - isAdmin check:', isAdmin());\n  \n  // Direct role check\n  const hasAdminRole = currentUser && currentUser.role === 'ADMIN';\n  console.log('Books component - direct role check:', hasAdminRole);\n  \n  const [books, setBooks] = useState([]);\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // Dialog states\n  const [openAddDialog, setOpenAddDialog] = useState(false);\n  const [openEditDialog, setOpenEditDialog] = useState(false);\n  const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\n  const [currentBook, setCurrentBook] = useState(null);\n  \n  // Snackbar state\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'info'\n  });\n\n  const fetchBooks = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('Fetching books...');\n      \n      const response = await booksAPI.getAll();\n      console.log('Books fetched:', response.data);\n      \n      if (Array.isArray(response.data)) {\n        console.log('Setting books state with:', response.data);\n        setBooks(response.data);\n        setFilteredBooks(response.data);\n      } else {\n        console.warn('Unexpected response format:', response.data);\n        setBooks([]);\n        setFilteredBooks([]);\n        setError('Received invalid data format from server');\n      }\n    } catch (err) {\n      console.error('Error fetching books:', err);\n      let errorMessage = 'Failed to load books. Please try again later.';\n      \n      if (err.response) {\n        errorMessage = `Server error (${err.response.status}): ${err.response.data?.message || err.response.data?.error || 'Unknown error'}`;\n      } else if (err.request) {\n        errorMessage = 'No response from server. Please check your connection.';\n      } else {\n        errorMessage = err.message || errorMessage;\n      }\n      \n      setError(errorMessage);\n      // If we have no books yet, set empty arrays to avoid undefined errors\n      if (!books.length) {\n        setBooks([]);\n        setFilteredBooks([]);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n\n  useEffect(() => {\n    if (searchTerm) {\n      const filtered = books.filter(book => \n        book.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        book.author.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        book.isbn.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n      setFilteredBooks(filtered);\n    } else {\n      setFilteredBooks(books);\n    }\n  }, [searchTerm, books]);\n\n  const handleSearchChange = (e) => {\n    setSearchTerm(e.target.value);\n  };\n\n  const clearSearch = () => {\n    setSearchTerm('');\n  };\n\n  // Add book\n  const handleAddBook = async (bookData) => {\n    try {\n      setLoading(true);\n      console.log('Adding book:', bookData);\n      \n      const response = await booksAPI.create(bookData);\n      console.log('Book added response:', response);\n      \n      // Update the books state directly with the new book\n      if (response.data) {\n        setBooks(prevBooks => {\n          const updatedBooks = [...prevBooks, response.data];\n          console.log('Updated books state:', updatedBooks);\n          return updatedBooks;\n        });\n        \n        // Also update filtered books to show the new book immediately\n        setFilteredBooks(prevFilteredBooks => {\n          const updatedFilteredBooks = [...prevFilteredBooks, response.data];\n          console.log('Updated filtered books state:', updatedFilteredBooks);\n          return updatedFilteredBooks;\n        });\n      }\n      \n      setSnackbar({\n        open: true,\n        message: 'Book added successfully. Redirecting to dashboard...',\n        severity: 'success'\n      });\n      \n      setOpenAddDialog(false);\n      \n      // Navigate to dashboard after a short delay to show the success message\n      setTimeout(() => {\n        navigate('/');\n      }, 1500);\n    } catch (err) {\n      console.error('Error adding book:', err);\n      let errorMessage = 'Failed to add book';\n      \n      if (err.response) {\n        errorMessage = err.response.data?.message || err.response.data?.error || `Server error: ${err.response.status}`;\n      } else if (err.request) {\n        errorMessage = 'No response from server. Please check your connection.';\n      } else {\n        errorMessage = err.message || errorMessage;\n      }\n      \n      setSnackbar({\n        open: true,\n        message: errorMessage,\n        severity: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Edit book\n  const handleEditBook = async (bookData) => {\n    try {\n      setLoading(true);\n      console.log('Updating book:', bookData);\n      \n      const response = await booksAPI.update(currentBook.id, bookData);\n      console.log('Book updated response:', response);\n      \n      setSnackbar({\n        open: true,\n        message: 'Book updated successfully',\n        severity: 'success'\n      });\n      \n      setOpenEditDialog(false);\n      fetchBooks();\n    } catch (err) {\n      console.error('Error updating book:', err);\n      let errorMessage = 'Failed to update book';\n      \n      if (err.response) {\n        errorMessage = err.response.data?.message || err.response.data?.error || `Server error: ${err.response.status}`;\n      } else if (err.request) {\n        errorMessage = 'No response from server. Please check your connection.';\n      } else {\n        errorMessage = err.message || errorMessage;\n      }\n      \n      setSnackbar({\n        open: true,\n        message: errorMessage,\n        severity: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Delete book\n  const handleDeleteBook = async () => {\n    try {\n      setLoading(true);\n      console.log('Deleting book:', currentBook.id);\n      \n      const response = await booksAPI.delete(currentBook.id);\n      console.log('Book deleted response:', response);\n      \n      setSnackbar({\n        open: true,\n        message: 'Book deleted successfully',\n        severity: 'success'\n      });\n      \n      setOpenDeleteDialog(false);\n      fetchBooks();\n    } catch (err) {\n      console.error('Error deleting book:', err);\n      let errorMessage = 'Failed to delete book';\n      \n      if (err.response) {\n        errorMessage = err.response.data?.message || err.response.data?.error || `Server error: ${err.response.status}`;\n      } else if (err.request) {\n        errorMessage = 'No response from server. Please check your connection.';\n      } else {\n        errorMessage = err.message || errorMessage;\n      }\n      \n      setSnackbar({\n        open: true,\n        message: errorMessage,\n        severity: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCloseSnackbar = () => {\n    setSnackbar({\n      ...snackbar,\n      open: false\n    });\n  };\n\n  if (loading && books.length === 0) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '50vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Box sx={{ my: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Books\n        </Typography>\n        \n        <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n          {hasAdminRole ? (\n            <Button\n              variant=\"contained\"\n              startIcon={<AddIcon />}\n              onClick={() => setOpenAddDialog(true)}\n            >\n              Add Book\n            </Button>\n          ) : (\n            <Button\n              variant=\"contained\"\n              startIcon={<AddIcon />}\n              onClick={() => {\n                console.log('Non-admin tried to add book - currentUser:', currentUser);\n                setSnackbar({\n                  open: true,\n                  message: 'Admin privileges required to add books. Use the \"Login as Admin\" option on the login page.',\n                  severity: 'warning'\n                });\n              }}\n            >\n              Add Book\n            </Button>\n          )}\n          \n          <Button\n            variant=\"outlined\"\n            startIcon={<RefreshIcon />}\n            onClick={() => {\n              console.log('Manually refreshing book list...');\n              fetchBooks();\n            }}\n          >\n            Refresh\n          </Button>\n        </Box>\n        \n        {!currentUser && (\n          <Alert severity=\"info\" sx={{ mb: 3 }}>\n            Please log in to access all features. Use the \"Login as Admin\" option on the login page for full access.\n          </Alert>\n        )}\n      </Box>\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n        </Alert>\n      )}\n      \n      <Box sx={{ mb: 3 }}>\n        <TextField\n          fullWidth\n          placeholder=\"Search by title, author, or ISBN\"\n          value={searchTerm}\n          onChange={handleSearchChange}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <SearchIcon />\n              </InputAdornment>\n            ),\n            endAdornment: searchTerm && (\n              <InputAdornment position=\"end\">\n                <IconButton size=\"small\" onClick={clearSearch}>\n                  <ClearIcon />\n                </IconButton>\n              </InputAdornment>\n            )\n          }}\n        />\n      </Box>\n      \n      {filteredBooks.length === 0 ? (\n        <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '200px' }}>\n          <Typography variant=\"body1\" color=\"text.secondary\">\n            {searchTerm ? 'No books match your search' : 'No books available'}\n          </Typography>\n        </Box>\n      ) : (\n        <Grid container spacing={3}>\n          {filteredBooks.map(book => (\n            <Grid item key={book.id} xs={12} sm={6} md={4} lg={3}>\n              <BookCard \n                book={book} \n                onEdit={(book) => {\n                  setCurrentBook(book);\n                  setOpenEditDialog(true);\n                }}\n                onDelete={(book) => {\n                  setCurrentBook(book);\n                  setOpenDeleteDialog(true);\n                }}\n              />\n            </Grid>\n          ))}\n        </Grid>\n      )}\n      \n      {/* Add Book Dialog */}\n      <Dialog open={openAddDialog} onClose={() => setOpenAddDialog(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Add New Book</DialogTitle>\n        <DialogContent>\n          <BookForm \n            onSubmit={handleAddBook} \n            onCancel={() => setOpenAddDialog(false)} \n          />\n        </DialogContent>\n      </Dialog>\n      \n      {/* Edit Book Dialog */}\n      <Dialog open={openEditDialog} onClose={() => setOpenEditDialog(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Edit Book</DialogTitle>\n        <DialogContent>\n          {currentBook && (\n            <BookForm \n              book={currentBook} \n              onSubmit={handleEditBook} \n              onCancel={() => setOpenEditDialog(false)} \n            />\n          )}\n        </DialogContent>\n      </Dialog>\n      \n      {/* Delete Book Dialog */}\n      <Dialog open={openDeleteDialog} onClose={() => setOpenDeleteDialog(false)}>\n        <DialogTitle>Delete Book</DialogTitle>\n        <DialogContent>\n          <Typography>\n            Are you sure you want to delete \"{currentBook?.title}\"?\n          </Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenDeleteDialog(false)}>Cancel</Button>\n          <Button onClick={handleDeleteBook} color=\"error\">Delete</Button>\n        </DialogActions>\n      </Dialog>\n      \n      {/* Snackbar for notifications */}\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={handleCloseSnackbar}\n      >\n        <Alert onClose={handleCloseSnackbar} severity={snackbar.severity} sx={{ width: '100%' }}>\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};\n\nexport default Books; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}